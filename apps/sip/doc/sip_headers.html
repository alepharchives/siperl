<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module sip_headers</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module sip_headers</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>SIP headers parsing, formating and utility functions to construct
   header values.
<p>Copyright © 2011 Ivan Dubrov. See LICENSE file.</p>

<p><b>Authors:</b> Ivan Dubrov (<a href="mailto:dubrov.ivan@gmail.com"><tt>dubrov.ivan@gmail.com</tt></a>).</p>
<p><b>References</b><ul><li>See <a href="http://tools.ietf.org/html/rfc3261#section-20">RFC 3261</a> for details.</li></ul></p>

<h2><a name="description">Description</a></h2>SIP headers parsing, formating and utility functions to construct
   header values
  
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-name">name()</a></h3>
<p><tt>name() = atom() | binary()</tt></p>
<p><p>  Optimized representation of entity name. When name is constructed  
from the binary, a check is made if atom with this value exists.  
If atom exists, it is used to represent the name of the entitiy.  
Otherwise, binary is used.</p>
 
  <p>This ensures both optimal representation of name at runtime without  
the danger of overloading atom table by malicious requests.</p>
 
  Note that client code can always safely match against atom, since
  matching against atom ensures atom is loaded (and therefore, atom
  representation will be chosen by SIP libary).</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#add_tag-3">add_tag/3</a></td><td>Add tag to the <code>From:</code> or <code>To:</code> header.</td></tr>
<tr><td valign="top"><a href="#address-3">address/3</a></td><td>Construct address (value of From/To headers).</td></tr>
<tr><td valign="top"><a href="#auth-2">auth/2</a></td><td>Construct <code>Authorization:</code> header value.</td></tr>
<tr><td valign="top"><a href="#cseq-2">cseq/2</a></td><td>Construct <code>CSeq:</code> header value.</td></tr>
<tr><td valign="top"><a href="#encoding-2">encoding/2</a></td><td>Construct encoding type value.</td></tr>
<tr><td valign="top"><a href="#format-2">format/2</a></td><td>Format header value into the binary.</td></tr>
<tr><td valign="top"><a href="#format_headers-1">format_headers/1</a></td><td>Formats headers into the binary.</td></tr>
<tr><td valign="top"><a href="#info-2">info/2</a></td><td>Construct <code>Alert-Info</code>, <code>Call-Info</code> headers value.</td></tr>
<tr><td valign="top"><a href="#language-2">language/2</a></td><td>Construct language type value.</td></tr>
<tr><td valign="top"><a href="#media-3">media/3</a></td><td>Construct media type value.</td></tr>
<tr><td valign="top"><a href="#parse-2">parse/2</a></td><td>Parse binary header value into the Erlang term representation.</td></tr>
<tr><td valign="top"><a href="#parse_headers-1">parse_headers/1</a></td><td>Split binary into list of headers.</td></tr>
<tr><td valign="top"><a href="#retry-3">retry/3</a></td><td>Construct <code>Retry-After:</code> header value.</td></tr>
<tr><td valign="top"><a href="#via-3">via/3</a></td><td>
  Construct Via header value.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="add_tag-3">add_tag/3</a></h3>
<div class="spec">
<p><tt>add_tag(Name::atom(), Sip_hdr_address::#sip_hdr_address{}, Tag::binary()) -&gt; #sip_hdr_address{}</tt><br></p>
</div><p>Add tag to the <code>From:</code> or <code>To:</code> header.</p>

<h3 class="function"><a name="address-3">address/3</a></h3>
<div class="spec">
<p><tt>address(DisplayName::binary(), URI::#sip_uri{} | #tel_uri{} | binary(), Params::list()) -&gt; #sip_hdr_address{}</tt><br></p>
</div><p><p>Construct address (value of From/To headers).</p>
 
  <em>Note: parses URI if it is given in binary form</em></p>

<h3 class="function"><a name="auth-2">auth/2</a></h3>
<div class="spec">
<p><tt>auth(Scheme::binary() | atom(), Params::[any()]) -&gt; #sip_hdr_auth{}</tt><br></p>
</div><p>Construct <code>Authorization:</code> header value</p>

<h3 class="function"><a name="cseq-2">cseq/2</a></h3>
<div class="spec">
<p><tt>cseq(Sequence::integer(), Method::atom() | binary()) -&gt; #sip_hdr_cseq{}</tt><br></p>
</div><p>Construct <code>CSeq:</code> header value.</p>

<h3 class="function"><a name="encoding-2">encoding/2</a></h3>
<div class="spec">
<p><tt>encoding(Encoding::atom() | binary(), Params::[any()]) -&gt; #sip_hdr_encoding{}</tt><br></p>
</div><p>Construct encoding type value.</p>

<h3 class="function"><a name="format-2">format/2</a></h3>
<div class="spec">
<p><tt>format(Name, Rest) -&gt; any()</tt></p>
</div><p>Format header value into the binary.</p>

<h3 class="function"><a name="format_headers-1">format_headers/1</a></h3>
<div class="spec">
<p><tt>format_headers(Headers::[{atom() | binary(), binary() | term()}]) -&gt; binary()</tt><br></p>
</div><p><p>Formats headers into the binary</p>
 
  For supported header representations, see <a href="#parse-2"><code>parse/2</code></a> function.</p>

<h3 class="function"><a name="info-2">info/2</a></h3>
<div class="spec">
<p><tt>info(URI::#sip_uri{} | binary(), Params::[any()]) -&gt; #sip_hdr_info{}</tt><br></p>
</div><p>Construct <code>Alert-Info</code>, <code>Call-Info</code> headers value</p>

<h3 class="function"><a name="language-2">language/2</a></h3>
<div class="spec">
<p><tt>language(Language::atom() | binary(), Params::[any()]) -&gt; #sip_hdr_language{}</tt><br></p>
</div><p>Construct language type value.</p>

<h3 class="function"><a name="media-3">media/3</a></h3>
<div class="spec">
<p><tt>media(Type::atom() | binary(), SubType::atom() | binary(), Params::[any()]) -&gt; #sip_hdr_mediatype{}</tt><br></p>
</div><p>Construct media type value.</p>

<h3 class="function"><a name="parse-2">parse/2</a></h3>
<div class="spec">
<p><tt>parse(Name::accept, Bin::binary()) -&gt; [#sip_hdr_mediatype{}]</tt><br></p>
</div><p><p>Parse binary header value into the Erlang term representation</p>
 
  See type specification for information about which term is used to represent
  particular header value.</p>

<h3 class="function"><a name="parse_headers-1">parse_headers/1</a></h3>
<div class="spec">
<p><tt>parse_headers(Headers::binary()) -&gt; [{Name::atom() | binary(), Value::binary() | term()}]</tt><br></p>
</div><p><p>Split binary into list of headers</p>
 
  Convert binary containing headers into list of non-parsed headers
  (with binary values). Binary must contain a sequence headers, each
  header terminated by <code>CRLF</code>. Empty binary is valid argument that
  results in empty list returned.</p>

<h3 class="function"><a name="retry-3">retry/3</a></h3>
<div class="spec">
<p><tt>retry(Delay::integer(), Comment::binary(), Params::[any()]) -&gt; #sip_hdr_retry{}</tt><br></p>
</div><p>Construct <code>Retry-After:</code> header value.</p>

<h3 class="function"><a name="via-3">via/3</a></h3>
<div class="spec">
<p><tt>via(Transport::atom(), Host::{string() | <a href="inet.html#type-ip_address">inet:ip_address()</a>, integer() | undefined} | string(), Params::[any()]) -&gt; #sip_hdr_via{}</tt><br></p>
</div><p>
  Construct Via header value.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Sep 5 2011, 15:04:58.</i></p>
</body>
</html>
